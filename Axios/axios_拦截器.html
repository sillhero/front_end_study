<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="UTF-8" />
		<title>axios_拦截器</title>
		<script src="https://cdn.bootcdn.net/ajax/libs/axios/0.21.1/axios.min.js"></script>
	</head>
	<body>
		<button>发送请求</button>
		<script>
            // 为 axios 添加请求拦截器
            axios.interceptors.request.use((config) => {
                // 请求拦截器成功回调
                console.log("请求拦截器成功回调");
                // 如果请求拦截器没有出现错误，必须要返回config对象
                return config;
            }, error => {
                throw error;
            });

            // 为 axios 添加响应拦截器
            axios.interceptors.response.use((response) => {
                // 响应拦截器成功回调
                console.log("响应拦截器成功回调");
                // 如果响应拦截器没有出现错误，必须要返回response对象
                return response;
            }, error => {
                console.log("响应拦截器失败回调");
                throw error;
            });


			//获取按钮
			let btn = document.querySelector("button");

			btn.onclick = function () {
				axios.get("http://api.xiaohigh.com/herosx").then(
					(response) => {
						console.log(response);
					},
					(error) => {
						console.log(error);
					}
				);
			};
		</script>
	</body>
</html>
